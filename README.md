Refactored ProcessPayment Validation & Fixed Test Failures

